#############################
########## Settings
#############################

# Refresh status line every 5 seconds - Good for when music is playing / update time etc
set -g status-interval 5

# Start window and pane indices at 1.
set -g base-index 1
set -g pane-base-index 0

# Length of tmux status line
# set -g status-left-length 30
# set -g status-right-length 150

set-option -g status "on"

# Set the history limit so we get lots of scrollback.
setw -g history-limit 50000000

# remap prefix from 'C-b' to 'C-t'
unbind C-b
set-option -g prefix C-t
bind-key C-t send-prefix

# vim mode-keys
setw -g mode-keys vi

# bind hjkl to move between panes
bind C-h select-pane -L
bind C-j select-pane -D
bind C-k select-pane -U
bind C-l select-pane -R

# if-shell str to check if window is zoomed
set -g @single_or_zoomed "#{==:#{window_zoomed_flag},1},#{==:#{window_panes},1}"

# if-shell str to check if pane title contains "vim"
set -g @pane_title_contains_vim "#{m/i:*vim*,#{pane_title}}"

# bind ctrl-space to open alfred 5 if shell is not running vim
# bind -n C-space if-shell -F "#{m/i:*vim*,#{pane_title}}" "send-keys C-space" "run-shell 'open -a \"Alfred 5\"'"
# bind -n C-space run-shell 'open -a "Alfred 5"'

# bind C-tab to switch panes if not zoomed, otherwise send to pane
bind -n C-tab if-shell -F "#{||:#{window_zoomed_flag},#{==:#{window_panes},1}}" "send-keys C-tab" "select-pane -t :.+"

bind -n C-9 if-shell -F "#{||:#{window_zoomed_flag},#{==:#{window_panes},1}}" "send-keys C-9" "select-pane -t 0"
bind -n C-0 if-shell -F "#{||:#{window_zoomed_flag},#{==:#{window_panes},1}}" "send-keys C-0" "select-pane -t 1"

# bind C-` to switch to next window
bind -n C-` next-window

# unbind detach key
unbind d

# make select-window numbers nicer
set -g base-index 1

# swap n, p bindings so n goes left and p goes right
bind n previous-window
bind p next-window

bind C-n previous-window
bind C-p next-window

# bind ctrl 1-8 to switch windows
bind -n C-1 select-window -t 1
bind -n C-2 select-window -t 2
bind -n C-3 select-window -t 3
bind -n C-4 select-window -t 4

# bind l to open a google search
bind l command-prompt -p "Google Search" "run-shell 'open https://www.google.com/search?q=%1'"

# bind v to enter copy mode
bind v copy-mode

bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"
bind P paste-buffer
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"

# Source .tmux.conf as suggested in `man tmux`
bind R source-file ~/.tmux.conf

set -g mouse on

set -g escape-time 10
set -s extended-keys on

set -g focus-events on

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'catppuccin/tmux'
set -g @plugin 'wfxr/tmux-net-speed'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @catppuccin_flavour 'mocha' # latte,frappe, macchiato or mocha
set -g @fzf-url-fzf-options '-p 60%,30% --prompt="   " --border-label=" Open URL "'

set -g @catppuccin_window_left_separator ""
set -g @catppuccin_window_right_separator " "
set -g @catppuccin_window_middle_separator " █"
set -g @catppuccin_window_number_position "right"

set -g @catppuccin_window_default_fill "number"
set -g @catppuccin_window_default_text "#W"

set -g @catppuccin_window_current_fill "number"
set -g @catppuccin_window_current_text "#W"

set -g @catppuccin_status_modules_right "application date_time session"
set -g @catppuccin_status_left_separator  " "
set -g @catppuccin_status_right_separator ""
set -g @catppuccin_status_fill "icon"
set -g @catppuccin_status_connect_separator "no"

set -g @catppuccin_directory_text "#{pane_current_path}"
# set -g status-left "#[fg=#262626,bg=#ff7f50,bold]  rainerguevara #[fg=#ff7f50,bg=#3a3a3a,nobold]#[fg=#ff7f50,bg=#3a3a3a] 󰈸 #S #[fg=#3a3a3a,bg=#303030]#[fg=#ff7f50,bg=#303030] 󰕒 #(/Users/rainerguevara/.tmux/plugins/tmux-net-speed/scripts/net-speed.sh   tx_bytes '%%7s') #[fg=#303030,bg=#262626]#{?client_prefix,#[fg=#262626]#[bg=#626262]#[fg=#ff7f50]#[bg=#262626]#[bg=#ff7f50]#[fg=#262626]^T#[fg=#ff7f50]#[bg=#262626],#{?pane_in_mode,#[default]#[fg=#ff7f50]#[bg=#262626]#[bold]#[fg=#ff7f50]#[bg=#262626]#[bg=#ff7f50]#[fg=#262626]Copy#[fg=#ff7f50]#[bg=#262626],#[default]#[fg=default]#[bg=default]}}#[default]"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
